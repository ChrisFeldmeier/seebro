#!/bin/sh
# Pre-commit hook: format, vet, test

set -e

echo "ðŸª¼ pre-commit: gofmt..."
unformatted=$(gofmt -l .)
if [ -n "$unformatted" ]; then
  echo "Files not formatted (run 'gofmt -w .'):"
  echo "$unformatted"
  exit 1
fi

echo "ðŸª¼ pre-commit: go vet..."
go vet ./...

echo "ðŸª¼ pre-commit: go test..."
go test ./... -count=1 -timeout=30s

echo "ðŸª¼ All checks passed."
